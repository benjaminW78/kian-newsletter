<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kian Spiruline - Newsletter</title>

    <!-- CSS -->
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: Arial, sans-serif;
            min-height: 100vh;
        }

        .top-bar {
            background-color: #2b8c67;
            color: white;
            padding: 0.5rem 1rem;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 1rem;
        }

        .flex {
            display: flex;
            justify-content: center;

        }

        .flex-wrap {
            flex-wrap: wrap;
        }

        .justify-between {
            justify-content: space-between;
        }

        .items-center {
            align-items: center;
        }

        .nav-bar {
            background: white;
            padding: 1rem;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .logo {
            width: 120px;
            height: auto;
        }

        .nav-links {
            display: none;
        }

        @media (min-width: 768px) {
            .nav-links {
                display: flex;
                gap: 2rem;
            }
        }

        .nav-link {
            color: #374151;
            text-decoration: none;
            transition: color 0.2s;
        }

        .nav-link:hover {
            color: #2b8c67;
        }

        .hero-section {
            position: relative;
            flex: 1;
            min-height: calc(100vh - 120px);
            overflow: hidden;
        }

        .video-background {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: cover;
            z-index: -1;
        }

        .image-overlay {
            position: absolute;
            inset: 0;
            background-image: url('https://kianspiruline.com/wp-content/uploads/2023/03/m6.jpg');
            background-size: cover;
            background-position: center;
            opacity: 0.5;
            z-index: -1;
        }

        .overlay {
            position: absolute;
            inset: 0;
            background: linear-gradient(to bottom, transparent, rgba(0, 50, 0, 0.5));
            z-index: -1;
        }

        .content {
            position: relative;
            padding: 5rem 1rem;
            text-align: center;
            color: white;
        }

        .title {
            font-size: 3.5rem;
            font-weight: bold;
            margin-bottom: 1rem;
        }

        .subtitle {
            font-size: 1.25rem;
            margin-bottom: 3rem;
        }

        .form-container, .success-message {
            max-width: 32rem;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(8px);
            padding: 2rem;
            border-radius: 0.5rem;
        }

        .hidden {
            display: none;
        }

        .form-title {
            font-size: 1.5rem;
            font-weight: bold;
            margin-bottom: 1.5rem;
            color: white;
        }

        .input-group {
            display: flex;
            gap: 1rem;
            margin-bottom: 1rem;
            flex-wrap: wrap;
            justify-content: center;
        }

        .email-input {
            flex: 1;
            padding: 0.75rem 1rem;
            border-radius: 0.5rem;
            border: 1px solid rgba(255, 255, 255, 0.2);
            background: rgba(255, 255, 255, 0.1);
            color: white;
            min-width: 250px;
        }

        .email-input::placeholder {
            color: rgba(255, 255, 255, 0.6);
        }

        .submit-button {
            padding: 0.75rem 2rem;
            background: #2b8c67;
            color: white;
            border: none;
            border-radius: 0.5rem;
            font-weight: 600;
            cursor: pointer;
            transition: background 0.2s;
        }

        .submit-button:hover {
            background: #236d51;
        }

        .submit-button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .error-message {
            color: #fca5a5;
            font-size: 0.875rem;
        }

        .back-button {
            padding: 0.5rem 1.5rem;
            background: white;
            color: #047857;
            border: none;
            border-radius: 0.5rem;
            font-weight: 600;
            cursor: pointer;
            margin-top: 10px;
            transition: background 0.2s;
        }

        .back-button:hover {
            background: #f9fafb;
        }

        .social-links {
            display: flex;
            gap: 1rem;
        }

        .social-icon {
            width: 24px;
            height: 24px;
            color: white;
        }
    </style>
</head>
<body>
    <!-- Top Bar -->
    <div class="top-bar">
        <div class="container flex flex-wrap justify-between items-center">
            <div>Kerbirio 56950 Crac'h</div>
            <div>07.83.60.70.14</div>
            <div>info@kianspiruline.com</div>
            <div class="social-links">
                <a href="https://www.facebook.com/kianspirulinebzh?locale=da_" target="_blank" class="social-link">
                    <svg class="social-icon" fill="currentColor" viewBox="0 0 24 24">
                        <path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/>
                    </svg>
                </a>
                <a href="https://www.linkedin.com/in/pierre-andré-morice-4b6928156/" target="_blank" class="social-link">
                    <svg class="social-icon" fill="currentColor" viewBox="0 0 24 24">
                        <path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/>
                    </svg>
                </a>
            </div>
        </div>
    </div>

    <!-- Navigation -->
    <nav class="nav-bar">
        <div class="container mx-auto flex justify-center items-center">
            <a href="https://kianspiruline.com/" class="flex justify-center">
                <img src="https://kianspiruline.com/wp-content/uploads/2023/03/Logo-Kian.png" alt="Kian Spiruline Logo" class="logo">
            </a>
        </div>
    </nav>

    <!-- Hero Section -->
    <div class="hero-section">
        <video class="video-background" autoplay loop muted playsinline>
            <source src="https://kianspiruline.com/wp-content/uploads/2023/03/pluie-deau.mp4" type="video/mp4">
        </video>
        <div class="image-overlay"></div>
        <div class="overlay"></div>
        
        <div class="content">
            <p class="subtitle">VOTRE PRODUCTEUR DE SPIRULINE PRÈS DE VANNES DANS LE GOLFE DU MORBIHAN</p>
            
            <!-- Form Container -->
            <div id="formContainer" class="form-container">
                <!-- Hidden iframe for form submission -->
                <iframe name="hidden_iframe" id="hidden_iframe" style="display:none;"></iframe>
                <form 
                    id="emailForm" 
                    action="https://script.google.com/macros/s/AKfycbzxPtpNuJ-bm5dbfCyNX5JdcZ9eKTsddivNe8kIy0iovzp6tTiPGndrYGxjW5XadBS0/exec" 
                    method="post"
                    target="hidden_iframe">
                    <h2 class="form-title">Vous aimez notre spiruline ? Rejoignez notre communauté !</h2>
                    <div class="input-group">
                        <input
                            type="text"
                            id="firstNameInput"
                            name="firstname"
                            placeholder="Votre prénom"
                            class="email-input"
                            required
                        >
                        <input
                            type="text"
                            id="lastNameInput"
                            name="lastname"
                            placeholder="Votre nom"
                            class="email-input"
                            required
                        >
                        <input
                            type="number"
                            id="departmentInput"
                            name="department"
                            placeholder="Votre numéro département"
                            class="email-input"
                            min="1"
                            max="99"
                            required
                        >
                        <input
                            type="email"
                            id="emailInput"
                            name="email"
                            placeholder="Votre adresse email"
                            class="email-input"
                            required
                        >
                        <button
                            type="submit"
                            id="submitButton"
                            class="submit-button"
                        >
                            S'inscrire
                        </button>
                    </div>
                    <div id="errorMessage" class="error-message hidden"></div>
                </form>
            </div>

            <!-- Success Message -->
            <div id="successMessage" class="success-message hidden">
                <h2 class="form-title">Merci de votre inscription !</h2>
                <p class="mb-6">Vous recevrez prochainement nos actualités.</p>
                <button id="backButton" class="back-button">
                    Retour
                </button>
            </div>
        </div>
    </div>

    <!-- JavaScript -->
    <script>
        const form = document.getElementById('emailForm');
        const formContainer = document.getElementById('formContainer');
        const successMessage = document.getElementById('successMessage');
        const backButton = document.getElementById('backButton');
        const errorMessage = document.getElementById('errorMessage');
        const submitButton = document.getElementById('submitButton');
        const emailInput = document.getElementById('emailInput');
        const firstNameInput = document.getElementById('firstNameInput');
        const lastNameInput = document.getElementById('lastNameInput');
        const departmentInput = document.getElementById('departmentInput');

        // Gestion de la soumission du formulaire
        form.addEventListener('submit', async (e) => {
            e.preventDefault();
            const formData = {
                firstname: firstNameInput.value,
                lastname: lastNameInput.value,
                department: departmentInput.value,
                email: emailInput.value
            };

            // Désactiver le formulaire pendant la soumission
            submitButton.disabled = true;
            submitButton.textContent = 'Envoi...';
            errorMessage.classList.add('hidden');

            try {
                // Envoyer l'email à Google Sheets
                const response = await fetch('https://script.google.com/macros/s/AKfycbzBCP_SnFTM8sdOpWxn68AmUU7laea0KY1VTPEioNTRzfEMpj9AasoqtJCUUHTQGKyK/exec', {
                    method: 'POST',
                    mode: 'no-cors',
                    body: JSON.stringify(formData),
                    headers: {
                        'Content-Type': 'application/json'
                    },
                });

                // Afficher le message de succès
                formContainer.classList.add('hidden');
                successMessage.classList.remove('hidden');

                // Réinitialiser le formulaire
                form.reset();
            } catch (error) {
                console.error('Erreur détaillée:', error);
                errorMessage.textContent = 'Une erreur est survenue. Veuillez réessayer plus tard.';
                errorMessage.classList.remove('hidden');
            } finally {
                submitButton.disabled = false;
                submitButton.textContent = 'S\'inscrire';
            }
        });

        // Gestion du bouton retour
        backButton.addEventListener('click', () => {
            successMessage.classList.add('hidden');
            formContainer.classList.remove('hidden');
        });

    </script>
</body>
</html>